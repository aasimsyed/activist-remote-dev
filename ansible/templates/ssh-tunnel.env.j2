# SSH Tunnel Environment Configuration
# Generated by Ansible
#
# Purpose:
# - Provides environment variables for SSH tunnel configuration
# - Used by both LaunchAgent and manual tunnel scripts
# - Ensures consistent configuration across different startup methods
#
# Security:
# - File permissions set to 600 (user read/write only)
# - Contains sensitive connection information
# - Should be stored in user's secure config directory

# Remote host configuration
{% if inventory_hostname == 'localhost' %}
DROPLET_IP={{ lookup('env', 'DROPLET_IP') }}
{% else %}
DROPLET_IP={{ ansible_host }}
{% endif %}
SSH_KEY_PATH={{ ansible_env.HOME }}/.ssh/id_rsa

# Port forwarding configuration
# These ports must match the application's docker-compose configuration
FRONTEND_PORT=3000  # React development server
BACKEND_PORT=8000   # Django backend API
DB_PORT=5432        # PostgreSQL database

# SSH options
SSH_OPTS="-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o ServerAliveInterval=60 -o ServerAliveCountMax=3 -o IdentitiesOnly=no"

# Tunnel options
# AUTOSSH_GATETIME=0: Removes initial connection delay
# AUTOSSH_PORT=0: Disables monitoring port for cleaner setup
AUTOSSH_GATETIME=0
AUTOSSH_PORT=0
AUTOSSH_LOGFILE="{{ ansible_env.HOME }}/.config/autossh.log"

# Variables:
# - DROPLET_IP: Dynamically set from Ansible host information
# - Used by LaunchAgent and shell scripts for tunnel establishment 